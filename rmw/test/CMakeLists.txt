enable_language(CXX)

find_package(ament_cmake_gmock REQUIRED)

ament_add_gmock(test_error_handling
  test_error_handling.cpp
  # Append the directory of librmw so it is found at test time.
  APPEND_LIBRARY_DIRS "$<TARGET_FILE_DIR:${PROJECT_NAME}>"
)
if(TARGET test_error_handling)
  target_link_libraries(test_error_handling ${PROJECT_NAME})
  if(UNIX AND NOT APPLE)
    target_link_libraries(test_error_handling pthread)
  endif()
  if(NOT WIN32)
    set_target_properties(test_error_handling PROPERTIES COMPILE_FLAGS "-std=c++14")
  endif()
endif()

ament_add_gmock(test_isalnum_no_locale
  test_isalnum_no_locale.cpp
  # Append the directory of librmw so it is found at test time.
  APPEND_LIBRARY_DIRS "$<TARGET_FILE_DIR:${PROJECT_NAME}>"
)
if(TARGET test_isalnum_no_locale)
  target_link_libraries(test_isalnum_no_locale ${PROJECT_NAME})
  if(UNIX AND NOT APPLE)
    target_link_libraries(test_isalnum_no_locale pthread)
  endif()
  if(NOT WIN32)
    set_target_properties(test_isalnum_no_locale PROPERTIES COMPILE_FLAGS "-std=c++14")
  endif()
endif()

ament_add_gmock(test_validate_topic_name
  test_validate_topic_name.cpp
  # Append the directory of librmw so it is found at test time.
  APPEND_LIBRARY_DIRS "$<TARGET_FILE_DIR:${PROJECT_NAME}>"
)
if(TARGET test_validate_topic_name)
  target_link_libraries(test_validate_topic_name ${PROJECT_NAME})
  if(UNIX AND NOT APPLE)
    target_link_libraries(test_validate_topic_name pthread)
  endif()
  if(NOT WIN32)
    set_target_properties(test_validate_topic_name PROPERTIES COMPILE_FLAGS "-std=c++14")
  endif()
endif()

ament_add_gmock(test_validate_node_name
  test_validate_node_name.cpp
  # Append the directory of librmw so it is found at test time.
  APPEND_LIBRARY_DIRS "$<TARGET_FILE_DIR:${PROJECT_NAME}>"
)
if(TARGET test_validate_node_name)
  target_link_libraries(test_validate_node_name ${PROJECT_NAME})
  if(UNIX AND NOT APPLE)
    target_link_libraries(test_validate_node_name pthread)
  endif()
  if(NOT WIN32)
    set_target_properties(test_validate_node_name PROPERTIES COMPILE_FLAGS "-std=c++14")
  endif()
endif()
